<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `TextureCache` struct in crate `webrender`."><meta name="keywords" content="rust, rustlang, rust-lang, TextureCache"><title>webrender::texture_cache::TextureCache - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css"><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script src="../../storage.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="shortcut icon" href="../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc struct"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../webrender/index.html'><div class='logo-container'><img src='../../rust-logo.png' alt='logo'></div></a><p class='location'>Struct TextureCache</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#fields">Fields</a><div class="sidebar-links"><a href="#structfield.shared_textures">shared_textures</a><a href="#structfield.picture_textures">picture_textures</a><a href="#structfield.max_texture_size">max_texture_size</a><a href="#structfield.max_texture_layers">max_texture_layers</a><a href="#structfield.swizzle">swizzle</a><a href="#structfield.debug_flags">debug_flags</a><a href="#structfield.next_id">next_id</a><a href="#structfield.pending_updates">pending_updates</a><a href="#structfield.now">now</a><a href="#structfield.reached_reclaim_threshold">reached_reclaim_threshold</a><a href="#structfield.entries">entries</a><a href="#structfield.per_doc_data">per_doc_data</a><a href="#structfield.doc_data">doc_data</a><a href="#structfield.require_frame_build">require_frame_build</a></div><a class="sidebar-title" href="#methods">Methods</a><div class="sidebar-links"><a href="#method.allocate">allocate</a><a href="#method.allocate_cache_entry">allocate_cache_entry</a><a href="#method.allocate_from_shared_cache">allocate_from_shared_cache</a><a href="#method.allocate_standalone_entry">allocate_standalone_entry</a><a href="#method.begin_frame">begin_frame</a><a href="#method.bookkeep_after_frames">bookkeep_after_frames</a><a href="#method.clear_all">clear_all</a><a href="#method.clear_kind">clear_kind</a><a href="#method.clear_picture">clear_picture</a><a href="#method.clear_shared">clear_shared</a><a href="#method.clear_standalone">clear_standalone</a><a href="#method.default_eviction">default_eviction</a><a href="#method.end_frame">end_frame</a><a href="#method.expire_old_entries">expire_old_entries</a><a href="#method.free">free</a><a href="#method.get">get</a><a href="#method.get_allocated_size">get_allocated_size</a><a href="#method.get_cache_location">get_cache_location</a><a href="#method.has_space_in_shared_cache">has_space_in_shared_cache</a><a href="#method.is_allocated">is_allocated</a><a href="#method.is_allowed_in_shared_cache">is_allowed_in_shared_cache</a><a href="#method.is_recently_used">is_recently_used</a><a href="#method.mark_unused">mark_unused</a><a href="#method.max_texture_size">max_texture_size</a><a href="#method.maybe_do_periodic_gc">maybe_do_periodic_gc</a><a href="#method.maybe_expire_old_shared_entries">maybe_expire_old_shared_entries</a><a href="#method.maybe_reclaim_shared_memory">maybe_reclaim_shared_memory</a><a href="#method.needs_upload">needs_upload</a><a href="#method.new">new</a><a href="#method.pending_updates">pending_updates</a><a href="#method.prepare_for_frames">prepare_for_frames</a><a href="#method.request">request</a><a href="#method.requires_frame_build">requires_frame_build</a><a href="#method.set_debug_flags">set_debug_flags</a><a href="#method.set_doc_data">set_doc_data</a><a href="#method.shared_alpha_expected_format">shared_alpha_expected_format</a><a href="#method.shared_color_expected_format">shared_color_expected_format</a><a href="#method.unset_doc_data">unset_doc_data</a><a href="#method.update">update</a><a href="#method.update_picture_cache">update_picture_cache</a><a href="#method.upsert_entry">upsert_entry</a></div><a class="sidebar-title" href="#implementations">Trait Implementations</a><div class="sidebar-links"><a href="#impl-Serialize">Serialize</a></div><a class="sidebar-title" href="#synthetic-implementations">Auto Trait Implementations</a><div class="sidebar-links"><a href="#impl-RefUnwindSafe">!RefUnwindSafe</a><a href="#impl-Send">!Send</a><a href="#impl-Sync">!Sync</a><a href="#impl-Unpin">Unpin</a><a href="#impl-UnwindSafe">!UnwindSafe</a></div><a class="sidebar-title" href="#blanket-implementations">Blanket Implementations</a><div class="sidebar-links"><a href="#impl-Any">Any</a><a href="#impl-Borrow%3CT%3E">Borrow&lt;T&gt;</a><a href="#impl-BorrowMut%3CT%3E">BorrowMut&lt;T&gt;</a><a href="#impl-From%3CT%3E">From&lt;T&gt;</a><a href="#impl-Into%3CU%3E">Into&lt;U&gt;</a><a href="#impl-Same%3CT%3E">Same&lt;T&gt;</a><a href="#impl-TryFrom%3CU%3E">TryFrom&lt;U&gt;</a><a href="#impl-TryInto%3CU%3E">TryInto&lt;U&gt;</a></div></div><p class='location'><a href='../index.html'>webrender</a>::<wbr><a href='index.html'>texture_cache</a></p><script>window.sidebarCurrent = {name: 'TextureCache', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../src/webrender/texture_cache.rs.html#507-558' title='goto source code'>[src]</a></span><span class='in-band'>Struct <a href='../index.html'>webrender</a>::<wbr><a href='index.html'>texture_cache</a>::<wbr><a class="struct" href=''>TextureCache</a></span></h1><div class="docblock type-decl hidden-by-usual-hider"><pre class='rust struct'>pub struct TextureCache {
    shared_textures: <a class="struct" href="../../webrender/texture_cache/struct.SharedTextures.html" title="struct webrender::texture_cache::SharedTextures">SharedTextures</a>,
    picture_textures: <a class="struct" href="../../alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../../webrender/texture_cache/struct.WholeTextureArray.html" title="struct webrender::texture_cache::WholeTextureArray">WholeTextureArray</a>&gt;,
    max_texture_size: <a class="primitive" href="../../std/primitive.i32.html">i32</a>,
    max_texture_layers: <a class="primitive" href="../../std/primitive.usize.html">usize</a>,
    swizzle: <a class="enum" href="../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../webrender/internal_types/struct.SwizzleSettings.html" title="struct webrender::internal_types::SwizzleSettings">SwizzleSettings</a>&gt;,
    debug_flags: <a class="struct" href="../../webrender/renderer/struct.DebugFlags.html" title="struct webrender::renderer::DebugFlags">DebugFlags</a>,
    next_id: <a class="struct" href="../../webrender/internal_types/struct.CacheTextureId.html" title="struct webrender::internal_types::CacheTextureId">CacheTextureId</a>,
    pending_updates: <a class="struct" href="../../webrender/internal_types/struct.TextureUpdateList.html" title="struct webrender::internal_types::TextureUpdateList">TextureUpdateList</a>,
    now: <a class="struct" href="../../webrender/render_backend/struct.FrameStamp.html" title="struct webrender::render_backend::FrameStamp">FrameStamp</a>,
    reached_reclaim_threshold: <a class="enum" href="../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../std/time/struct.SystemTime.html" title="struct std::time::SystemTime">SystemTime</a>&gt;,
    entries: <a class="struct" href="../../webrender/freelist/struct.FreeList.html" title="struct webrender::freelist::FreeList">FreeList</a>&lt;<a class="struct" href="../../webrender/texture_cache/struct.CacheEntry.html" title="struct webrender::texture_cache::CacheEntry">CacheEntry</a>, <a class="enum" href="../../webrender/texture_cache/enum.CacheEntryMarker.html" title="enum webrender::texture_cache::CacheEntryMarker">CacheEntryMarker</a>&gt;,
    per_doc_data: <a class="struct" href="../../std/collections/hash/map/struct.HashMap.html" title="struct std::collections::hash::map::HashMap">HashMap</a>&lt;<a class="struct" href="../../webrender_api/api/struct.DocumentId.html" title="struct webrender_api::api::DocumentId">DocumentId</a>, <a class="struct" href="../../webrender/texture_cache/struct.PerDocumentData.html" title="struct webrender::texture_cache::PerDocumentData">PerDocumentData</a>, <a class="struct" href="../../core/hash/struct.BuildHasherDefault.html" title="struct core::hash::BuildHasherDefault">BuildHasherDefault</a>&lt;<a class="struct" href="../../fxhash/struct.FxHasher.html" title="struct fxhash::FxHasher">FxHasher</a>&gt;&gt;,
    doc_data: <a class="struct" href="../../webrender/texture_cache/struct.PerDocumentData.html" title="struct webrender::texture_cache::PerDocumentData">PerDocumentData</a>,
    require_frame_build: <a class="primitive" href="../../std/primitive.bool.html">bool</a>,
}</pre></div><div class='docblock'><p>General-purpose manager for images in GPU memory. This includes images,
rasterized glyphs, rasterized blobs, cached render tasks, etc.</p>
<p>The texture cache is owned and managed by the RenderBackend thread, and
produces a series of commands to manipulate the textures on the Renderer
thread. These commands are executed before any rendering is performed for
a given frame.</p>
<p>Entries in the texture cache are not guaranteed to live past the end of the
frame in which they are requested, and may be evicted. The API supports
querying whether an entry is still available.</p>
<p>The TextureCache is different from the GpuCache in that the former stores
images, whereas the latter stores data and parameters for use in the shaders.
This means that the texture cache can be visualized, which is a good way to
understand how it works. Enabling gfx.webrender.debug.texture-cache shows a
live view of its contents in Firefox.</p>
</div><h2 id='fields' class='fields small-section-header'>
                       Fields<a href='#fields' class='anchor'></a></h2><span id="structfield.shared_textures" class="structfield small-section-header"><a href="#structfield.shared_textures" class="anchor field"></a><code id="shared_textures.v">shared_textures: <a class="struct" href="../../webrender/texture_cache/struct.SharedTextures.html" title="struct webrender::texture_cache::SharedTextures">SharedTextures</a></code></span><div class='docblock'><p>Set of texture arrays in different formats used for the shared cache.</p>
</div><span id="structfield.picture_textures" class="structfield small-section-header"><a href="#structfield.picture_textures" class="anchor field"></a><code id="picture_textures.v">picture_textures: <a class="struct" href="../../alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../../webrender/texture_cache/struct.WholeTextureArray.html" title="struct webrender::texture_cache::WholeTextureArray">WholeTextureArray</a>&gt;</code></span><div class='docblock'><p>A single texture array for picture caching.</p>
</div><span id="structfield.max_texture_size" class="structfield small-section-header"><a href="#structfield.max_texture_size" class="anchor field"></a><code id="max_texture_size.v">max_texture_size: <a class="primitive" href="../../std/primitive.i32.html">i32</a></code></span><div class='docblock'><p>Maximum texture size supported by hardware.</p>
</div><span id="structfield.max_texture_layers" class="structfield small-section-header"><a href="#structfield.max_texture_layers" class="anchor field"></a><code id="max_texture_layers.v">max_texture_layers: <a class="primitive" href="../../std/primitive.usize.html">usize</a></code></span><div class='docblock'><p>Maximum number of texture layers supported by hardware.</p>
</div><span id="structfield.swizzle" class="structfield small-section-header"><a href="#structfield.swizzle" class="anchor field"></a><code id="swizzle.v">swizzle: <a class="enum" href="../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../webrender/internal_types/struct.SwizzleSettings.html" title="struct webrender::internal_types::SwizzleSettings">SwizzleSettings</a>&gt;</code></span><div class='docblock'><p>Settings on using texture unit swizzling.</p>
</div><span id="structfield.debug_flags" class="structfield small-section-header"><a href="#structfield.debug_flags" class="anchor field"></a><code id="debug_flags.v">debug_flags: <a class="struct" href="../../webrender/renderer/struct.DebugFlags.html" title="struct webrender::renderer::DebugFlags">DebugFlags</a></code></span><div class='docblock'><p>The current set of debug flags.</p>
</div><span id="structfield.next_id" class="structfield small-section-header"><a href="#structfield.next_id" class="anchor field"></a><code id="next_id.v">next_id: <a class="struct" href="../../webrender/internal_types/struct.CacheTextureId.html" title="struct webrender::internal_types::CacheTextureId">CacheTextureId</a></code></span><div class='docblock'><p>The next unused virtual texture ID. Monotonically increasing.</p>
</div><span id="structfield.pending_updates" class="structfield small-section-header"><a href="#structfield.pending_updates" class="anchor field"></a><code id="pending_updates.v">pending_updates: <a class="struct" href="../../webrender/internal_types/struct.TextureUpdateList.html" title="struct webrender::internal_types::TextureUpdateList">TextureUpdateList</a></code></span><div class='docblock'><p>A list of allocations and updates that need to be applied to the texture
cache in the rendering thread this frame.</p>
</div><span id="structfield.now" class="structfield small-section-header"><a href="#structfield.now" class="anchor field"></a><code id="now.v">now: <a class="struct" href="../../webrender/render_backend/struct.FrameStamp.html" title="struct webrender::render_backend::FrameStamp">FrameStamp</a></code></span><div class='docblock'><p>The current <code>FrameStamp</code>. Used for cache eviction policies.</p>
</div><span id="structfield.reached_reclaim_threshold" class="structfield small-section-header"><a href="#structfield.reached_reclaim_threshold" class="anchor field"></a><code id="reached_reclaim_threshold.v">reached_reclaim_threshold: <a class="enum" href="../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../std/time/struct.SystemTime.html" title="struct std::time::SystemTime">SystemTime</a>&gt;</code></span><div class='docblock'><p>The time at which we first reached the byte threshold for reclaiming
cache memory. `None if we haven't reached the threshold.</p>
</div><span id="structfield.entries" class="structfield small-section-header"><a href="#structfield.entries" class="anchor field"></a><code id="entries.v">entries: <a class="struct" href="../../webrender/freelist/struct.FreeList.html" title="struct webrender::freelist::FreeList">FreeList</a>&lt;<a class="struct" href="../../webrender/texture_cache/struct.CacheEntry.html" title="struct webrender::texture_cache::CacheEntry">CacheEntry</a>, <a class="enum" href="../../webrender/texture_cache/enum.CacheEntryMarker.html" title="enum webrender::texture_cache::CacheEntryMarker">CacheEntryMarker</a>&gt;</code></span><div class='docblock'><p>Maintains the list of all current items in the texture cache.</p>
</div><span id="structfield.per_doc_data" class="structfield small-section-header"><a href="#structfield.per_doc_data" class="anchor field"></a><code id="per_doc_data.v">per_doc_data: <a class="struct" href="../../std/collections/hash/map/struct.HashMap.html" title="struct std::collections::hash::map::HashMap">HashMap</a>&lt;<a class="struct" href="../../webrender_api/api/struct.DocumentId.html" title="struct webrender_api::api::DocumentId">DocumentId</a>, <a class="struct" href="../../webrender/texture_cache/struct.PerDocumentData.html" title="struct webrender::texture_cache::PerDocumentData">PerDocumentData</a>, <a class="struct" href="../../core/hash/struct.BuildHasherDefault.html" title="struct core::hash::BuildHasherDefault">BuildHasherDefault</a>&lt;<a class="struct" href="../../fxhash/struct.FxHasher.html" title="struct fxhash::FxHasher">FxHasher</a>&gt;&gt;</code></span><div class='docblock'><p>Holds items that need to be maintained on a per-document basis. If we
modify this data for a document without also building a frame for that
document, then we might end up erroneously evicting items out from
under that document.</p>
</div><span id="structfield.doc_data" class="structfield small-section-header"><a href="#structfield.doc_data" class="anchor field"></a><code id="doc_data.v">doc_data: <a class="struct" href="../../webrender/texture_cache/struct.PerDocumentData.html" title="struct webrender::texture_cache::PerDocumentData">PerDocumentData</a></code></span><div class='docblock'><p>The current document's data. This is moved out of per_doc_data in
begin_frame and moved back in end_frame to solve borrow checker issues.
We should try removing this when we require a rustc with NLL.</p>
</div><span id="structfield.require_frame_build" class="structfield small-section-header"><a href="#structfield.require_frame_build" class="anchor field"></a><code id="require_frame_build.v">require_frame_build: <a class="primitive" href="../../std/primitive.bool.html">bool</a></code></span><div class='docblock'><p>This indicates that we performed a cleanup operation which requires all
documents to build a frame.</p>
</div><h2 id='methods' class='small-section-header'>Methods<a href='#methods' class='anchor'></a></h2><h3 id='impl' class='impl'><code class='in-band'>impl <a class="struct" href="../../webrender/texture_cache/struct.TextureCache.html" title="struct webrender::texture_cache::TextureCache">TextureCache</a></code><a href='#impl' class='anchor'></a><a class='srclink' href='../../src/webrender/texture_cache.rs.html#560-1439' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.new' class="method"><code id='new.v'>pub fn <a href='#method.new' class='fnname'>new</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;max_texture_size: <a class="primitive" href="../../std/primitive.i32.html">i32</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;max_texture_layers: <a class="primitive" href="../../std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;picture_tile_sizes: <a class="primitive" href="../../std/primitive.slice.html">&amp;[</a><a class="type" href="../../webrender_api/units/type.DeviceIntSize.html" title="type webrender_api::units::DeviceIntSize">DeviceIntSize</a><a class="primitive" href="../../std/primitive.slice.html">]</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;initial_size: <a class="type" href="../../webrender_api/units/type.DeviceIntSize.html" title="type webrender_api::units::DeviceIntSize">DeviceIntSize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;color_formats: <a class="struct" href="../../webrender/device/gl/struct.TextureFormatPair.html" title="struct webrender::device::gl::TextureFormatPair">TextureFormatPair</a>&lt;<a class="enum" href="../../webrender_api/image/enum.ImageFormat.html" title="enum webrender_api::image::ImageFormat">ImageFormat</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;swizzle: <a class="enum" href="../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../webrender/internal_types/struct.SwizzleSettings.html" title="struct webrender::internal_types::SwizzleSettings">SwizzleSettings</a>&gt;<br>) -&gt; Self</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#561-645' title='goto source code'>[src]</a></h4><h4 id='method.set_debug_flags' class="method"><code id='set_debug_flags.v'>pub fn <a href='#method.set_debug_flags' class='fnname'>set_debug_flags</a>(&amp;mut self, flags: <a class="struct" href="../../webrender/renderer/struct.DebugFlags.html" title="struct webrender::renderer::DebugFlags">DebugFlags</a>)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#670-672' title='goto source code'>[src]</a></h4><h4 id='method.clear_kind' class="method"><code id='clear_kind.v'>fn <a href='#method.clear_kind' class='fnname'>clear_kind</a>(&amp;mut self, kind: <a class="enum" href="../../webrender/texture_cache/enum.EntryKind.html" title="enum webrender::texture_cache::EntryKind">EntryKind</a>)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#675-693' title='goto source code'>[src]</a></h4><div class='docblock'><p>Clear all entries of the specified kind.</p>
</div><h4 id='method.clear_standalone' class="method"><code id='clear_standalone.v'>fn <a href='#method.clear_standalone' class='fnname'>clear_standalone</a>(&amp;mut self)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#695-698' title='goto source code'>[src]</a></h4><h4 id='method.clear_picture' class="method"><code id='clear_picture.v'>fn <a href='#method.clear_picture' class='fnname'>clear_picture</a>(&amp;mut self)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#700-707' title='goto source code'>[src]</a></h4><h4 id='method.clear_shared' class="method"><code id='clear_shared.v'>fn <a href='#method.clear_shared' class='fnname'>clear_shared</a>(&amp;mut self)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#709-714' title='goto source code'>[src]</a></h4><h4 id='method.clear_all' class="method"><code id='clear_all.v'>pub fn <a href='#method.clear_all' class='fnname'>clear_all</a>(&amp;mut self)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#718-722' title='goto source code'>[src]</a></h4><div class='docblock'><p>Clear all entries in the texture cache. This is a fairly drastic
step that should only be called very rarely.</p>
</div><h4 id='method.set_doc_data' class="method"><code id='set_doc_data.v'>fn <a href='#method.set_doc_data' class='fnname'>set_doc_data</a>(&amp;mut self)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#724-729' title='goto source code'>[src]</a></h4><h4 id='method.unset_doc_data' class="method"><code id='unset_doc_data.v'>fn <a href='#method.unset_doc_data' class='fnname'>unset_doc_data</a>(&amp;mut self)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#731-734' title='goto source code'>[src]</a></h4><h4 id='method.prepare_for_frames' class="method"><code id='prepare_for_frames.v'>pub fn <a href='#method.prepare_for_frames' class='fnname'>prepare_for_frames</a>(&amp;mut self, time: <a class="struct" href="../../std/time/struct.SystemTime.html" title="struct std::time::SystemTime">SystemTime</a>)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#736-738' title='goto source code'>[src]</a></h4><h4 id='method.bookkeep_after_frames' class="method"><code id='bookkeep_after_frames.v'>pub fn <a href='#method.bookkeep_after_frames' class='fnname'>bookkeep_after_frames</a>(&amp;mut self)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#740-742' title='goto source code'>[src]</a></h4><h4 id='method.requires_frame_build' class="method"><code id='requires_frame_build.v'>pub fn <a href='#method.requires_frame_build' class='fnname'>requires_frame_build</a>(&amp;self) -&gt; <a class="primitive" href="../../std/primitive.bool.html">bool</a></code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#744-746' title='goto source code'>[src]</a></h4><h4 id='method.begin_frame' class="method"><code id='begin_frame.v'>pub fn <a href='#method.begin_frame' class='fnname'>begin_frame</a>(&amp;mut self, stamp: <a class="struct" href="../../webrender/render_backend/struct.FrameStamp.html" title="struct webrender::render_backend::FrameStamp">FrameStamp</a>)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#749-754' title='goto source code'>[src]</a></h4><div class='docblock'><p>Called at the beginning of each frame.</p>
</div><h4 id='method.maybe_reclaim_shared_memory' class="method"><code id='maybe_reclaim_shared_memory.v'>fn <a href='#method.maybe_reclaim_shared_memory' class='fnname'>maybe_reclaim_shared_memory</a>(&amp;mut self, time: <a class="struct" href="../../std/time/struct.SystemTime.html" title="struct std::time::SystemTime">SystemTime</a>)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#756-780' title='goto source code'>[src]</a></h4><h4 id='method.maybe_do_periodic_gc' class="method"><code id='maybe_do_periodic_gc.v'>fn <a href='#method.maybe_do_periodic_gc' class='fnname'>maybe_do_periodic_gc</a>(&amp;mut self)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#786-805' title='goto source code'>[src]</a></h4><div class='docblock'><p>Called at the beginning of each frame to periodically GC by expiring
old shared entries. If necessary, the shared memory opened up as a
result of expiring these entries will be reclaimed before the next
group of document frames.</p>
</div><h4 id='method.end_frame' class="method"><code id='end_frame.v'>pub fn <a href='#method.end_frame' class='fnname'>end_frame</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;texture_cache_profile: &amp;mut <a class="struct" href="../../webrender/profiler/struct.TextureCacheProfileCounters.html" title="struct webrender::profiler::TextureCacheProfileCounters">TextureCacheProfileCounters</a><br>)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#807-842' title='goto source code'>[src]</a></h4><h4 id='method.request' class="method"><code id='request.v'>pub fn <a href='#method.request' class='fnname'>request</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;handle: &amp;<a class="struct" href="../../webrender/freelist/struct.WeakFreeListHandle.html" title="struct webrender::freelist::WeakFreeListHandle">WeakFreeListHandle</a>&lt;<a class="enum" href="../../webrender/texture_cache/enum.CacheEntryMarker.html" title="enum webrender::texture_cache::CacheEntryMarker">CacheEntryMarker</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;gpu_cache: &amp;mut <a class="struct" href="../../webrender/gpu_cache/struct.GpuCache.html" title="struct webrender::gpu_cache::GpuCache">GpuCache</a><br>) -&gt; <a class="primitive" href="../../std/primitive.bool.html">bool</a></code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#852-863' title='goto source code'>[src]</a></h4><h4 id='method.needs_upload' class="method"><code id='needs_upload.v'>pub fn <a href='#method.needs_upload' class='fnname'>needs_upload</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;handle: &amp;<a class="struct" href="../../webrender/freelist/struct.WeakFreeListHandle.html" title="struct webrender::freelist::WeakFreeListHandle">WeakFreeListHandle</a>&lt;<a class="enum" href="../../webrender/texture_cache/enum.CacheEntryMarker.html" title="enum webrender::texture_cache::CacheEntryMarker">CacheEntryMarker</a>&gt;<br>) -&gt; <a class="primitive" href="../../std/primitive.bool.html">bool</a></code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#868-870' title='goto source code'>[src]</a></h4><h4 id='method.max_texture_size' class="method"><code id='max_texture_size.v-1'>pub fn <a href='#method.max_texture_size' class='fnname'>max_texture_size</a>(&amp;self) -&gt; <a class="primitive" href="../../std/primitive.i32.html">i32</a></code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#872-874' title='goto source code'>[src]</a></h4><h4 id='method.pending_updates' class="method"><code id='pending_updates.v-1'>pub fn <a href='#method.pending_updates' class='fnname'>pending_updates</a>(&amp;mut self) -&gt; <a class="struct" href="../../webrender/internal_types/struct.TextureUpdateList.html" title="struct webrender::internal_types::TextureUpdateList">TextureUpdateList</a></code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#896-898' title='goto source code'>[src]</a></h4><h4 id='method.update' class="method"><code id='update.v'>pub fn <a href='#method.update' class='fnname'>update</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;handle: &amp;mut <a class="struct" href="../../webrender/freelist/struct.WeakFreeListHandle.html" title="struct webrender::freelist::WeakFreeListHandle">WeakFreeListHandle</a>&lt;<a class="enum" href="../../webrender/texture_cache/enum.CacheEntryMarker.html" title="enum webrender::texture_cache::CacheEntryMarker">CacheEntryMarker</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;descriptor: <a class="struct" href="../../webrender_api/image/struct.ImageDescriptor.html" title="struct webrender_api::image::ImageDescriptor">ImageDescriptor</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;filter: <a class="enum" href="../../webrender/device/gl/enum.TextureFilter.html" title="enum webrender::device::gl::TextureFilter">TextureFilter</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;data: <a class="enum" href="../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="enum" href="../../webrender/resource_cache/enum.CachedImageData.html" title="enum webrender::resource_cache::CachedImageData">CachedImageData</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;user_data: <a class="primitive" href="../../std/primitive.array.html">[</a><a class="primitive" href="../../std/primitive.f32.html">f32</a><a class="primitive" href="../../std/primitive.array.html">; 3]</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;dirty_rect: <a class="type" href="../../webrender_api/units/type.ImageDirtyRect.html" title="type webrender_api::units::ImageDirtyRect">ImageDirtyRect</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;gpu_cache: &amp;mut <a class="struct" href="../../webrender/gpu_cache/struct.GpuCache.html" title="struct webrender::gpu_cache::GpuCache">GpuCache</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;eviction_notice: <a class="enum" href="../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="struct" href="../../webrender/texture_cache/struct.EvictionNotice.html" title="struct webrender::texture_cache::EvictionNotice">EvictionNotice</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;uv_rect_kind: <a class="enum" href="../../webrender/gpu_types/enum.UvRectKind.html" title="enum webrender::gpu_types::UvRectKind">UvRectKind</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;eviction: <a class="enum" href="../../webrender/texture_cache/enum.Eviction.html" title="enum webrender::texture_cache::Eviction">Eviction</a><br>)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#901-980' title='goto source code'>[src]</a></h4><h4 id='method.is_allocated' class="method"><code id='is_allocated.v'>pub fn <a href='#method.is_allocated' class='fnname'>is_allocated</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;handle: &amp;<a class="struct" href="../../webrender/freelist/struct.WeakFreeListHandle.html" title="struct webrender::freelist::WeakFreeListHandle">WeakFreeListHandle</a>&lt;<a class="enum" href="../../webrender/texture_cache/enum.CacheEntryMarker.html" title="enum webrender::texture_cache::CacheEntryMarker">CacheEntryMarker</a>&gt;<br>) -&gt; <a class="primitive" href="../../std/primitive.bool.html">bool</a></code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#984-986' title='goto source code'>[src]</a></h4><h4 id='method.is_recently_used' class="method"><code id='is_recently_used.v'>pub fn <a href='#method.is_recently_used' class='fnname'>is_recently_used</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;handle: &amp;<a class="struct" href="../../webrender/freelist/struct.WeakFreeListHandle.html" title="struct webrender::freelist::WeakFreeListHandle">WeakFreeListHandle</a>&lt;<a class="enum" href="../../webrender/texture_cache/enum.CacheEntryMarker.html" title="enum webrender::texture_cache::CacheEntryMarker">CacheEntryMarker</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;margin: <a class="primitive" href="../../std/primitive.usize.html">usize</a><br>) -&gt; <a class="primitive" href="../../std/primitive.bool.html">bool</a></code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#990-994' title='goto source code'>[src]</a></h4><h4 id='method.get_allocated_size' class="method"><code id='get_allocated_size.v'>pub fn <a href='#method.get_allocated_size' class='fnname'>get_allocated_size</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;handle: &amp;<a class="struct" href="../../webrender/freelist/struct.WeakFreeListHandle.html" title="struct webrender::freelist::WeakFreeListHandle">WeakFreeListHandle</a>&lt;<a class="enum" href="../../webrender/texture_cache/enum.CacheEntryMarker.html" title="enum webrender::texture_cache::CacheEntryMarker">CacheEntryMarker</a>&gt;<br>) -&gt; <a class="enum" href="../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="../../std/primitive.usize.html">usize</a>&gt;</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#998-1002' title='goto source code'>[src]</a></h4><h4 id='method.get' class="method"><code id='get.v'>pub fn <a href='#method.get' class='fnname'>get</a>(&amp;self, handle: &amp;<a class="struct" href="../../webrender/freelist/struct.WeakFreeListHandle.html" title="struct webrender::freelist::WeakFreeListHandle">WeakFreeListHandle</a>&lt;<a class="enum" href="../../webrender/texture_cache/enum.CacheEntryMarker.html" title="enum webrender::texture_cache::CacheEntryMarker">CacheEntryMarker</a>&gt;) -&gt; <a class="struct" href="../../webrender/resource_cache/struct.CacheItem.html" title="struct webrender::resource_cache::CacheItem">CacheItem</a></code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#1009-1017' title='goto source code'>[src]</a></h4><h4 id='method.get_cache_location' class="method"><code id='get_cache_location.v'>pub fn <a href='#method.get_cache_location' class='fnname'>get_cache_location</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;handle: &amp;<a class="struct" href="../../webrender/freelist/struct.WeakFreeListHandle.html" title="struct webrender::freelist::WeakFreeListHandle">WeakFreeListHandle</a>&lt;<a class="enum" href="../../webrender/texture_cache/enum.CacheEntryMarker.html" title="enum webrender::texture_cache::CacheEntryMarker">CacheEntryMarker</a>&gt;<br>) -&gt; <a class="primitive" href="../../std/primitive.tuple.html">(</a><a class="struct" href="../../webrender/internal_types/struct.CacheTextureId.html" title="struct webrender::internal_types::CacheTextureId">CacheTextureId</a>, <a class="primitive" href="../../std/primitive.usize.html">usize</a>, <a class="type" href="../../webrender_api/units/type.DeviceIntRect.html" title="type webrender_api::units::DeviceIntRect">DeviceIntRect</a>, <a class="enum" href="../../webrender/internal_types/enum.Swizzle.html" title="enum webrender::internal_types::Swizzle">Swizzle</a>, <a class="struct" href="../../webrender/gpu_cache/struct.GpuCacheHandle.html" title="struct webrender::gpu_cache::GpuCacheHandle">GpuCacheHandle</a><a class="primitive" href="../../std/primitive.tuple.html">)</a></code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#1024-1038' title='goto source code'>[src]</a></h4><div class='docblock'><p>A more detailed version of get(). This allows access to the actual
device rect of the cache allocation.</p>
<p>Returns a tuple identifying the texture, the layer, the region,
and its GPU handle.</p>
</div><h4 id='method.mark_unused' class="method"><code id='mark_unused.v'>pub fn <a href='#method.mark_unused' class='fnname'>mark_unused</a>(&amp;mut self, handle: &amp;<a class="struct" href="../../webrender/freelist/struct.WeakFreeListHandle.html" title="struct webrender::freelist::WeakFreeListHandle">WeakFreeListHandle</a>&lt;<a class="enum" href="../../webrender/texture_cache/enum.CacheEntryMarker.html" title="enum webrender::texture_cache::CacheEntryMarker">CacheEntryMarker</a>&gt;)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#1040-1047' title='goto source code'>[src]</a></h4><h4 id='method.default_eviction' class="method"><code id='default_eviction.v'>fn <a href='#method.default_eviction' class='fnname'>default_eviction</a>(&amp;self) -&gt; <a class="struct" href="../../webrender/texture_cache/struct.EvictionThreshold.html" title="struct webrender::texture_cache::EvictionThreshold">EvictionThreshold</a></code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#1063-1069' title='goto source code'>[src]</a></h4><div class='docblock'><p>Returns the default eviction policy.</p>
<p>These parameters come from very rough instrumentation of hits in the
shared cache, with simple browsing on a few pages. In rough terms, more
than 99.5% of cache hits occur for entries that were used in the previous
frame. This is obviously the dominant case, but we still want good behavior
in long-tail cases (i.e. a large image is scrolled off-screen and on again).
If we exclude immediately-reused (first frame) entries, 70% of the remaining
hits happen within the first 200 frames. So we can be relatively agressive
about eviction without sacrificing much in terms of cache performance.
The one wrinkle is that animation-heavy pages do tend to extend the
distribution, presumably because they churn through FrameIds faster than
their more-static counterparts. As such, we <em>also</em> provide a time floor
(which was not measured with the same degree of rigour).</p>
</div><h4 id='method.expire_old_entries' class="method"><code id='expire_old_entries.v'>fn <a href='#method.expire_old_entries' class='fnname'>expire_old_entries</a>(&amp;mut self, kind: <a class="enum" href="../../webrender/texture_cache/enum.EntryKind.html" title="enum webrender::texture_cache::EntryKind">EntryKind</a>, threshold: <a class="struct" href="../../webrender/texture_cache/struct.EvictionThreshold.html" title="struct webrender::texture_cache::EvictionThreshold">EvictionThreshold</a>)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#1074-1109' title='goto source code'>[src]</a></h4><div class='docblock'><p>Shared eviction code for standalone and shared entries.</p>
<p>See <code>EvictionThreshold</code> for more details on policy.</p>
</div><h4 id='method.maybe_expire_old_shared_entries' class="method"><code id='maybe_expire_old_shared_entries.v'>fn <a href='#method.maybe_expire_old_shared_entries' class='fnname'>maybe_expire_old_shared_entries</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;threshold: <a class="struct" href="../../webrender/texture_cache/struct.EvictionThreshold.html" title="struct webrender::texture_cache::EvictionThreshold">EvictionThreshold</a><br>) -&gt; <a class="primitive" href="../../std/primitive.bool.html">bool</a></code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#1114-1122' title='goto source code'>[src]</a></h4><div class='docblock'><p>Expires old shared entries, if we haven't done so this frame.</p>
<p>Returns true if any entries were expired.</p>
</div><h4 id='method.free' class="method"><code id='free.v'>fn <a href='#method.free' class='fnname'>free</a>(&amp;mut self, entry: &amp;<a class="struct" href="../../webrender/texture_cache/struct.CacheEntry.html" title="struct webrender::texture_cache::CacheEntry">CacheEntry</a>)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#1125-1171' title='goto source code'>[src]</a></h4><h4 id='method.has_space_in_shared_cache' class="method"><code id='has_space_in_shared_cache.v'>fn <a href='#method.has_space_in_shared_cache' class='fnname'>has_space_in_shared_cache</a>(&amp;mut self, params: &amp;<a class="struct" href="../../webrender/texture_cache/struct.CacheAllocParams.html" title="struct webrender::texture_cache::CacheAllocParams">CacheAllocParams</a>) -&gt; <a class="primitive" href="../../std/primitive.bool.html">bool</a></code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#1174-1186' title='goto source code'>[src]</a></h4><div class='docblock'><p>Check if we can allocate this entry without growing any of the texture cache arrays.</p>
</div><h4 id='method.allocate_from_shared_cache' class="method"><code id='allocate_from_shared_cache.v'>fn <a href='#method.allocate_from_shared_cache' class='fnname'>allocate_from_shared_cache</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;params: &amp;<a class="struct" href="../../webrender/texture_cache/struct.CacheAllocParams.html" title="struct webrender::texture_cache::CacheAllocParams">CacheAllocParams</a><br>) -&gt; <a class="struct" href="../../webrender/texture_cache/struct.CacheEntry.html" title="struct webrender::texture_cache::CacheEntry">CacheEntry</a></code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#1189-1249' title='goto source code'>[src]</a></h4><div class='docblock'><p>Allocate a block from the shared cache.</p>
</div><h4 id='method.is_allowed_in_shared_cache' class="method"><code id='is_allowed_in_shared_cache.v'>pub fn <a href='#method.is_allowed_in_shared_cache' class='fnname'>is_allowed_in_shared_cache</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;filter: <a class="enum" href="../../webrender/device/gl/enum.TextureFilter.html" title="enum webrender::device::gl::TextureFilter">TextureFilter</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;descriptor: &amp;<a class="struct" href="../../webrender_api/image/struct.ImageDescriptor.html" title="struct webrender_api::image::ImageDescriptor">ImageDescriptor</a><br>) -&gt; <a class="primitive" href="../../std/primitive.bool.html">bool</a></code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#1253-1280' title='goto source code'>[src]</a></h4><h4 id='method.allocate_standalone_entry' class="method"><code id='allocate_standalone_entry.v'>fn <a href='#method.allocate_standalone_entry' class='fnname'>allocate_standalone_entry</a>(&amp;mut self, params: &amp;<a class="struct" href="../../webrender/texture_cache/struct.CacheAllocParams.html" title="struct webrender::texture_cache::CacheAllocParams">CacheAllocParams</a>) -&gt; <a class="struct" href="../../webrender/texture_cache/struct.CacheEntry.html" title="struct webrender::texture_cache::CacheEntry">CacheEntry</a></code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#1283-1315' title='goto source code'>[src]</a></h4><div class='docblock'><p>Allocates a new standalone cache entry.</p>
</div><h4 id='method.allocate_cache_entry' class="method"><code id='allocate_cache_entry.v'>fn <a href='#method.allocate_cache_entry' class='fnname'>allocate_cache_entry</a>(&amp;mut self, params: &amp;<a class="struct" href="../../webrender/texture_cache/struct.CacheAllocParams.html" title="struct webrender::texture_cache::CacheAllocParams">CacheAllocParams</a>) -&gt; <a class="struct" href="../../webrender/texture_cache/struct.CacheEntry.html" title="struct webrender::texture_cache::CacheEntry">CacheEntry</a></code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#1322-1340' title='goto source code'>[src]</a></h4><div class='docblock'><p>Allocates a cache entry appropriate for the given parameters.</p>
<p>This allocates from the shared cache unless the parameters do not meet
the shared cache requirements, in which case a standalone texture is
used.</p>
</div><h4 id='method.upsert_entry' class="method"><code id='upsert_entry.v'>fn <a href='#method.upsert_entry' class='fnname'>upsert_entry</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;cache_entry: <a class="struct" href="../../webrender/texture_cache/struct.CacheEntry.html" title="struct webrender::texture_cache::CacheEntry">CacheEntry</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;handle: &amp;mut <a class="struct" href="../../webrender/freelist/struct.WeakFreeListHandle.html" title="struct webrender::freelist::WeakFreeListHandle">WeakFreeListHandle</a>&lt;<a class="enum" href="../../webrender/texture_cache/enum.CacheEntryMarker.html" title="enum webrender::texture_cache::CacheEntryMarker">CacheEntryMarker</a>&gt;<br>)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#1342-1380' title='goto source code'>[src]</a></h4><h4 id='method.allocate' class="method"><code id='allocate.v'>fn <a href='#method.allocate' class='fnname'>allocate</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;params: &amp;<a class="struct" href="../../webrender/texture_cache/struct.CacheAllocParams.html" title="struct webrender::texture_cache::CacheAllocParams">CacheAllocParams</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;handle: &amp;mut <a class="struct" href="../../webrender/freelist/struct.WeakFreeListHandle.html" title="struct webrender::freelist::WeakFreeListHandle">WeakFreeListHandle</a>&lt;<a class="enum" href="../../webrender/texture_cache/enum.CacheEntryMarker.html" title="enum webrender::texture_cache::CacheEntryMarker">CacheEntryMarker</a>&gt;<br>)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#1384-1388' title='goto source code'>[src]</a></h4><div class='docblock'><p>Allocates a cache entry for the given parameters, and updates the
provided handle to point to the new entry.</p>
</div><h4 id='method.update_picture_cache' class="method"><code id='update_picture_cache.v'>pub fn <a href='#method.update_picture_cache' class='fnname'>update_picture_cache</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;mut self, <br>&nbsp;&nbsp;&nbsp;&nbsp;tile_size: <a class="type" href="../../webrender_api/units/type.DeviceIntSize.html" title="type webrender_api::units::DeviceIntSize">DeviceIntSize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;handle: &amp;mut <a class="struct" href="../../webrender/freelist/struct.WeakFreeListHandle.html" title="struct webrender::freelist::WeakFreeListHandle">WeakFreeListHandle</a>&lt;<a class="enum" href="../../webrender/texture_cache/enum.CacheEntryMarker.html" title="enum webrender::texture_cache::CacheEntryMarker">CacheEntryMarker</a>&gt;, <br>&nbsp;&nbsp;&nbsp;&nbsp;gpu_cache: &amp;mut <a class="struct" href="../../webrender/gpu_cache/struct.GpuCache.html" title="struct webrender::gpu_cache::GpuCache">GpuCache</a><br>)</code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#1391-1430' title='goto source code'>[src]</a></h4><h4 id='method.shared_alpha_expected_format' class="method"><code id='shared_alpha_expected_format.v'>pub fn <a href='#method.shared_alpha_expected_format' class='fnname'>shared_alpha_expected_format</a>(&amp;self) -&gt; <a class="enum" href="../../webrender_api/image/enum.ImageFormat.html" title="enum webrender_api::image::ImageFormat">ImageFormat</a></code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#1432-1434' title='goto source code'>[src]</a></h4><h4 id='method.shared_color_expected_format' class="method"><code id='shared_color_expected_format.v'>pub fn <a href='#method.shared_color_expected_format' class='fnname'>shared_color_expected_format</a>(&amp;self) -&gt; <a class="enum" href="../../webrender_api/image/enum.ImageFormat.html" title="enum webrender_api::image::ImageFormat">ImageFormat</a></code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#1436-1438' title='goto source code'>[src]</a></h4></div><h2 id='implementations' class='small-section-header'>Trait Implementations<a href='#implementations' class='anchor'></a></h2><div id='implementations-list'><h3 id='impl-Serialize' class='impl'><code class='in-band'>impl <a class="trait" href="../../serde/ser/trait.Serialize.html" title="trait serde::ser::Serialize">Serialize</a> for <a class="struct" href="../../webrender/texture_cache/struct.TextureCache.html" title="struct webrender::texture_cache::TextureCache">TextureCache</a></code><a href='#impl-Serialize' class='anchor'></a><a class='srclink' href='../../src/webrender/texture_cache.rs.html#505' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.serialize' class="method hidden"><code id='serialize.v'>fn <a href='../../serde/ser/trait.Serialize.html#tymethod.serialize' class='fnname'>serialize</a>&lt;__S&gt;(&amp;self, __serializer: __S) -&gt; <a class="enum" href="../../core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;__S::<a class="type" href="../../serde/ser/trait.Serializer.html#associatedtype.Ok" title="type serde::ser::Serializer::Ok">Ok</a>, __S::<a class="type" href="../../serde/ser/trait.Serializer.html#associatedtype.Error" title="type serde::ser::Serializer::Error">Error</a>&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;__S: <a class="trait" href="../../serde/ser/trait.Serializer.html" title="trait serde::ser::Serializer">Serializer</a>,&nbsp;</span></code><a class='srclink' href='../../src/webrender/texture_cache.rs.html#505' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Serialize this value into the given Serde serializer. <a href="../../serde/ser/trait.Serialize.html#tymethod.serialize">Read more</a></p>
</div></div></div><h2 id='synthetic-implementations' class='small-section-header'>Auto Trait Implementations<a href='#synthetic-implementations' class='anchor'></a></h2><div id='synthetic-implementations-list'><h3 id='impl-RefUnwindSafe' class='impl'><code class='in-band'>impl !<a class="trait" href="../../std/panic/trait.RefUnwindSafe.html" title="trait std::panic::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="../../webrender/texture_cache/struct.TextureCache.html" title="struct webrender::texture_cache::TextureCache">TextureCache</a></code><a href='#impl-RefUnwindSafe' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-Send' class='impl'><code class='in-band'>impl !<a class="trait" href="../../core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="../../webrender/texture_cache/struct.TextureCache.html" title="struct webrender::texture_cache::TextureCache">TextureCache</a></code><a href='#impl-Send' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-Sync' class='impl'><code class='in-band'>impl !<a class="trait" href="../../core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="../../webrender/texture_cache/struct.TextureCache.html" title="struct webrender::texture_cache::TextureCache">TextureCache</a></code><a href='#impl-Sync' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-Unpin' class='impl'><code class='in-band'>impl <a class="trait" href="../../core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="../../webrender/texture_cache/struct.TextureCache.html" title="struct webrender::texture_cache::TextureCache">TextureCache</a></code><a href='#impl-Unpin' class='anchor'></a></h3><div class='impl-items'></div><h3 id='impl-UnwindSafe' class='impl'><code class='in-band'>impl !<a class="trait" href="../../std/panic/trait.UnwindSafe.html" title="trait std::panic::UnwindSafe">UnwindSafe</a> for <a class="struct" href="../../webrender/texture_cache/struct.TextureCache.html" title="struct webrender::texture_cache::TextureCache">TextureCache</a></code><a href='#impl-UnwindSafe' class='anchor'></a></h3><div class='impl-items'></div></div><h2 id='blanket-implementations' class='small-section-header'>Blanket Implementations<a href='#blanket-implementations' class='anchor'></a></h2><div id='blanket-implementations-list'><h3 id='impl-Any' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="../../core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'static + ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href='#impl-Any' class='anchor'></a><a class='srclink' href='../../src/core/any.rs.html#108-112' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.type_id' class="method hidden"><code id='type_id.v'>fn <a href='../../core/any/trait.Any.html#tymethod.type_id' class='fnname'>type_id</a>(&amp;self) -&gt; <a class="struct" href="../../core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></code><a class='srclink' href='../../src/core/any.rs.html#109-111' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Gets the <code>TypeId</code> of <code>self</code>. <a href="../../core/any/trait.Any.html#tymethod.type_id">Read more</a></p>
</div></div><h3 id='impl-Borrow%3CT%3E' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="../../core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href='#impl-Borrow%3CT%3E' class='anchor'></a><a class='srclink' href='../../src/core/borrow.rs.html#213-217' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.borrow' class="method hidden"><code id='borrow.v'>fn <a href='../../core/borrow/trait.Borrow.html#tymethod.borrow' class='fnname'>borrow</a>(&amp;self) -&gt; <a class="primitive" href="../../std/primitive.reference.html">&amp;</a>T</code><a class='srclink' href='../../src/core/borrow.rs.html#214-216' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Immutably borrows from an owned value. <a href="../../core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></p>
</div></div><h3 id='impl-BorrowMut%3CT%3E' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="../../core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></code><a href='#impl-BorrowMut%3CT%3E' class='anchor'></a><a class='srclink' href='../../src/core/borrow.rs.html#220-224' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.borrow_mut' class="method hidden"><code id='borrow_mut.v'>fn <a href='../../core/borrow/trait.BorrowMut.html#tymethod.borrow_mut' class='fnname'>borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="../../std/primitive.reference.html">&amp;mut </a>T</code><a class='srclink' href='../../src/core/borrow.rs.html#221-223' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Mutably borrows from an owned value. <a href="../../core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></p>
</div></div><h3 id='impl-From%3CT%3E' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="../../core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</code><a href='#impl-From%3CT%3E' class='anchor'></a><a class='srclink' href='../../src/core/convert/mod.rs.html#564-568' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.from' class="method hidden"><code id='from.v'>fn <a href='../../core/convert/trait.From.html#tymethod.from' class='fnname'>from</a>(t: T) -&gt; T</code><a class='srclink' href='../../src/core/convert/mod.rs.html#565-567' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id='impl-Into%3CU%3E' class='impl'><code class='in-band'>impl&lt;T, U&gt; <a class="trait" href="../../core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="../../core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,&nbsp;</span></code><a href='#impl-Into%3CU%3E' class='anchor'></a><a class='srclink' href='../../src/core/convert/mod.rs.html#553-560' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.into' class="method hidden"><code id='into.v'>fn <a href='../../core/convert/trait.Into.html#tymethod.into' class='fnname'>into</a>(self) -&gt; U</code><a class='srclink' href='../../src/core/convert/mod.rs.html#557-559' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id='impl-Same%3CT%3E' class='impl'><code class='in-band'>impl&lt;T&gt; <a class="trait" href="../../typenum/type_operators/trait.Same.html" title="trait typenum::type_operators::Same">Same</a>&lt;T&gt; for T</code><a href='#impl-Same%3CT%3E' class='anchor'></a><a class='srclink' href='../../src/typenum/type_operators.rs.html#32-34' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='associatedtype.Output' class="type"><code id='Output.t'>type <a href='../../typenum/type_operators/trait.Same.html#associatedtype.Output' class="type">Output</a> = T</code></h4><div class='docblock'><p>Should always be <code>Self</code></p>
</div></div><h3 id='impl-TryFrom%3CU%3E' class='impl'><code class='in-band'>impl&lt;T, U&gt; <a class="trait" href="../../core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="../../core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,&nbsp;</span></code><a href='#impl-TryFrom%3CU%3E' class='anchor'></a><a class='srclink' href='../../src/core/convert/mod.rs.html#601-610' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='associatedtype.Error' class="type"><code id='Error.t'>type <a href='../../core/convert/trait.TryFrom.html#associatedtype.Error' class="type">Error</a> = <a class="enum" href="../../core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></code></h4><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div><h4 id='method.try_from' class="method hidden"><code id='try_from.v'>fn <a href='../../core/convert/trait.TryFrom.html#tymethod.try_from' class='fnname'>try_from</a>(value: U) -&gt; <a class="enum" href="../../core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="../../core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="type" href="../../core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</code><a class='srclink' href='../../src/core/convert/mod.rs.html#607-609' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div><h3 id='impl-TryInto%3CU%3E' class='impl'><code class='in-band'>impl&lt;T, U&gt; <a class="trait" href="../../core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="../../core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,&nbsp;</span></code><a href='#impl-TryInto%3CU%3E' class='anchor'></a><a class='srclink' href='../../src/core/convert/mod.rs.html#587-596' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='associatedtype.Error-1' class="type"><code id='Error.t-1'>type <a href='../../core/convert/trait.TryInto.html#associatedtype.Error' class="type">Error</a> = &lt;U as <a class="trait" href="../../core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="../../core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></code></h4><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div><h4 id='method.try_into' class="method hidden"><code id='try_into.v'>fn <a href='../../core/convert/trait.TryInto.html#tymethod.try_into' class='fnname'>try_into</a>(self) -&gt; <a class="enum" href="../../core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="../../core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="../../core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</code><a class='srclink' href='../../src/core/convert/mod.rs.html#593-595' title='goto source code'>[src]</a></h4><div class='docblock hidden'><p>Performs the conversion.</p>
</div></div></div></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../";window.currentCrate = "webrender";</script><script src="../../aliases.js"></script><script src="../../main.js"></script><script defer src="../../search-index.js"></script></body></html>